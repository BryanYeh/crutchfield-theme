{% assign current_variant = product.selected_or_first_available_variant %}
{% assign featured_image = current_variant.featured_image | default: product.featured_image %}

<div class="mx-auto w-full container p-4">
    <h1 class="text-4xl font-bold pb-4">{{ product.title }}</h1>

    <div class="flex mx-auto flex-wrap mb-4" data-id="{{ current_variant.id }}">
        <div class="w-full md:w-6/12 lg:w-7/12 md:pr-4">
            <div class="swiper-container gallery-top hover:text-red-600 cursor-pointer">
                <div class="swiper-wrapper">
                    {% for image in product.images %}
                        <div class="swiper-slide" {% if image.src == featured_image %} data-default-slide="{{ forloop.index0 }}" {% endif %}>
                        <img src="{{ image.src | img_url: 'master' }}" class="mx-auto" alt="{{ image.alt | escape }}">
                        <div class="zoom text-center">
                            <span class="gallery-image-caption font-bold text-lg">{{ product.title }} - {{ image.alt | escape }}</span>
                            <i class="las la-search-plus float-right text-2xl"></i>
                        </div>
                        </div>
                    {% endfor %}
                </div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>
            <div class="gallery-thumbs pt-1 pb-2 flex flex-wrap">
                {% for image in product.images %}
                    <img src="{{ image.src | img_url: '90x90' }}" class="m-1 border border-gray-400 current-thumb p-3 hover:border-black" alt="{{ image.alt | escape }}" data-thumbs-index="{{ forloop.index0 }}">
                {% endfor %}
            </div>
        </div>

        <div class="w-full md:w-6/12 lg:w-5/12 md:pl-4 border-l md:border-solid md:border-gray-300">
            <span class="shopify-product-reviews-badge" data-id="{{ product.id }}"></span>
            {% if current_variant.available %}
                <div class="text-lg"><i class="availability las la-check-circle"></i> <span class="availability_text">In Stock<span></div>
            {% else %}
                <div class="text-lg"><i class="availability las la-times-circle"></i> <span class="availability_text">Out of Stock<span></div>
            {% endif %}

            {% unless product.has_only_default_variant %}
                {% for option in product.options %}
                <label for="variation-select-{{ option | downcase }}" class="block mt-2">{{ option }}</label>
                <select name="" id="variation-select-{{ option | downcase }}" class="variation-option-select border border-gray-500 focus:outline-none focus:shadow-outline focus:border-blue-200 block">
                    {% for option_value in product.options_by_name[option].values %}
                        <option value="{{ option_value }}" {% if current_variant.options contains option_value %}selected{% endif %}>{{ option_value }}</option>
                    {% endfor %}
                </select>
                {% endfor %}
            {% endunless %}
            {% if product.available %}
                <button class="add-to-cart border border-red-600 bg-red-600 text-white text-3xl hover:bg-white hover:text-red-600 focus:outline-none focus:shadow-md px-10 py-3 mt-3 block rounded">Add to Cart</button>
            {% else %}
                <button class="border border-red-600 bg-white text-red-600 cursor-not-allowed px-10 py-3 mt-2 text-3xl block rounded">Sold Out</button>
            {% endif %}
        </div>
    </div>


    <script type="application/json" id="v_json">{{ product.variants | json }}</script>

    {% render 'photoswipe' %}
</div>

