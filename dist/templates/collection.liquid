{% paginate collection.products by settings.products_per_page %}
  <h1 class="text-5xl font-bold px-8">{{ collection.title }}</h1>
  <p class="px-8 text-lg pb-3">{{ collection.all_products_count }} total items</p>

  <div class="px-8 py-4 mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 bg-gray-200">
    {% for product in collection.products %}
      <div class="border border-gray-400 bg-white p-4 hover:border-red-500 flex flex-col">
        <a href="{{ product.url | within: collection }}" class="">
          <img src="{{ product.featured_image.src | img_url: '500x500' }}" alt="{{ product.featured_image.alt | escape }}">
          <div class="font-bold text-lg hover:text-red-600">{{ product.title }}</div>
        </a>
        {% if product.sku %}
          <div>Item #: {{ product.sku }}</div>
        {% endif %}
        {% if product.available %}
          <div><i class="las la-check-circle"></i> In Stock</div>
        {% else %}
          <i class="las la-times-circle"></i> Out of Stock
        {% endif %}
        
        <div class="text-right h-full">
          <div class="text-gray-700 line-through">
            {% if product.compare_at_price %}
            {{ product.compare_at_price | money }}
            {% endif %}
          </div>
          <div class="text-red-600">
            {% if product.compare_at_price %}
            {{ product.compare_at_price | minus:product.price | money }} Discount
            {% endif %}
          </div>
          <div class="font-bold text-lg">{{ product.price | money }}</div>        
        </div>

        {% if product.available %}
          <button class="border border-red-600 bg-red-600 text-white hover:bg-white hover:text-red-600 w-full py-3 px-4">Add to Cart</button>
        {% else %}
          <button class="border border-red-600 bg-white text-red-600 cursor-not-allowed w-full py-3 px-4">Sold Out</button>
        {% endif %}
          
      </div>
    {% else %}
      <p>no matches</p>
    {% endfor %}
    {% if paginate.pages > 1 %}
      {{ paginate | default_pagination }}
    {% endif %}
  </div>

{% endpaginate %}
